# ğŸ—ºï¸ æ¨¡æ¿é¡¹ç›®åœ°å›¾ (Factory Map) - V2.0 (Prometheus Edition)
> **æ³¨æ„**: æœ¬åœ°å›¾ä»…æè¿°â€œåä½œæ¨¡æ¿æ¯ç‰ˆâ€è‡ªèº«çš„ç»“æ„ã€‚æ–°ç”Ÿæˆçš„é¡¹ç›®ä¼šæœ‰å…¶ç‹¬ç«‹çš„ä¸šåŠ¡åœ°å›¾ã€‚

## 1. æ ¸å¿ƒåœ°å½¢ (Topology)

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ª**â€œæç¤ºè¯èµ„äº§å·¥å‚â€**ï¼Œç»“æ„ä¸Šä¸¥æ ¼åŒºåˆ† **å·¥å‚ä¸Šä¸‹æ–‡ (Factory Context)** ä¸ **äº§å“ä¸Šä¸‹æ–‡ (Product Context)**ã€‚

### ğŸ­ Factory Context (ç”Ÿäº§ç«¯)

è´Ÿè´£ç”Ÿäº§ã€ç»´æŠ¤å’Œç®¡ç†æç¤ºè¯èµ„äº§çš„æ ¸å¿ƒåŒºåŸŸã€‚

*   **ğŸ“‚ æ ¸å¿ƒèµ„äº§ (`prompts-library/`)**: äº¤ä»˜ç»™ç”¨æˆ·çš„æ ¸å¿ƒäº§å“ã€‚
    *   `templates/capabilities/`: **åŸå­èƒ½åŠ› (Atomic Capabilities)** - ç¬¦åˆ Prometheus XML æ ‡å‡†çš„ Agentã€‚
        *   **`development/architect/`**:
            *   `prometheus-prompt-engineer.md`: **Prometheus** - æç¤ºè¯å·¥ç¨‹å¸ˆ (Meta-Architect)ã€‚
            *   `project-mapper.md`: **Map Updater** - ç›®æ ‡é¡¹ç›®åœ°å›¾ç»´æŠ¤è€…ã€‚
        *   **`development/frontend/`**:
            *   `streamlit-expert.md`: **Streamlit Expert** - å‰ç«¯å¼€å‘ä¸“å®¶ã€‚
        *   **`development/maintenance/`**:
            *   `code-maintainer.md`: **The Detective** - ä»£ç ç»´æŠ¤ä¸é‡æ„ã€‚
        *   **`ops/`**:
            *   `python-distributor.md`: **Distributor** - Python åŒ…å‘å¸ƒä¸“å®¶ã€‚
        *   **`product/`**:
            *   `technical-pm.md`: **TPM** - æŠ€æœ¯äº§å“ç»ç† (ä»»åŠ¡æ‹†è§£)ã€‚
            *   `project-advocate.md`: **Project Advocate** - éœ€æ±‚ä¸æ–‡æ¡£ä¸€è‡´æ€§å®ˆæŠ¤è€…ã€‚
        *   **`testing/`**:
            *   `rubric-specialist.md`: **Rubric QA** - åŸºäºè¯„åˆ†æ ‡å‡†çš„æµ‹è¯•ä¸“å®¶ã€‚
    *   `templates/patterns/`: **åä½œæ¨¡å¼ (Team Patterns)** - å¤šä¸ªåŸå­èƒ½åŠ›çš„ç¼–æ’ã€‚
        *   `virtual-streamlit-team.md`: è™šæ‹Ÿ Streamlit ç ”å‘å›¢é˜Ÿ (TPM + DEV + QA)ã€‚
    *   `guides/`: **ä½¿ç”¨è¯´æ˜ä¹¦**ã€‚
        *   `prompt-writing-guide.md`: æç¤ºè¯ç¼–å†™æŒ‡å—ã€‚

*   **ğŸ“‚ ç»´æŠ¤å·¥å…· (`_meta/`)**: ç»´æŠ¤æœ¬å·¥å‚çš„å·¥å…·ä¸è®°å½• (ä¸ä¼šå¤åˆ¶åˆ°æ–°é¡¹ç›®)ã€‚
    *   `prompts/ops/`: **è¿ç»´å…ƒè§’è‰²å›¢é˜Ÿ (Meta-Ops)**
        *   `project-incubator.md`: **Project Incubator** - é¡¹ç›®å­µåŒ–å™¨ (äº¤äº’å¼åˆ›å»ºå‘å¯¼)ã€‚
        *   `rule-checker.md`: **Prometheus Validator** - å¼ºåˆ¶æ£€æŸ¥ XML/CoT ç»“æ„ã€‚
        *   `map-updater.md`: **Cartographer Agent** - ç»´æŠ¤å·¥å‚åœ°å›¾ vs äº§å“åœ°å›¾çš„éš”ç¦»ã€‚
        *   `prompt-extractor.md`: **Pattern Distiller** - ä»å¯¹è¯ä¸­è’¸é¦æ–°æ¨¡æ¿ã€‚
        *   `version-bumper.md`: **Automation Agent** - ç®¡ç† SemVer ç‰ˆæœ¬å·ã€‚
    *   `docs/`: æ¶æ„å†³ç­–è®°å½• (ADR) ä¸æ¼”è¿›æ–‡æ¡£ã€‚
        *   `æ¨¡æ¿é¡¹ç›®åœ°å›¾.md`: **The Truth** - æœ¬æ–‡ä»¶ã€‚
        *   `versioning-policy.md`: ç‰ˆæœ¬ç®¡ç†ç­–ç•¥ã€‚
        *   `2025-06-10-project-structure-evolution.md`: é¡¹ç›®ç»“æ„æ¼”è¿›è®°å½•ã€‚
        *   `2025-11-26-prompt-evolution-strategy.md`: æç¤ºè¯æ¼”è¿›ç­–ç•¥ã€‚
        *   `2025-11-27-advanced-prompt-engineering-seminar.md`: é«˜çº§æç¤ºè¯å·¥ç¨‹ç ”è®¨ã€‚
        *   `2025-11-27-architecture-evolution-roadmap.md`: æ¶æ„æ¼”è¿›è·¯çº¿å›¾ã€‚
        *   `2025-11-27-prompt-library-refactoring.md`: æç¤ºè¯åº“é‡æ„è®°å½•ã€‚
        *   `2025-11-27-rule-system-test-cases.md`: è§„åˆ™ç³»ç»Ÿæµ‹è¯•ç”¨ä¾‹ã€‚
    *   `legacy_roles/`: å½’æ¡£çš„æ—§ç‰ˆè§’è‰² (å·²åºŸå¼ƒ)ã€‚

*   **ğŸ“‚ è¿è¡Œæ—¶æ³•åˆ™ (`.cursor/rules/`)**: æ§åˆ¶ AI è¡Œä¸ºçš„æŒ‡ä»¤é›†ã€‚
    *   `01-project-rules.mdc`: **Global Constitution** - è®¤çŸ¥åè®®ã€æ–‡æ¡£æ ‡å‡†ä¸æ²Ÿé€šæ³•åˆ™ã€‚
    *   `02-project-playbook.mdc`: **Lifecycle State Machine** - å®šä¹‰ Bootstrapping / Development / Maintenance çŠ¶æ€ã€‚
    *   `03-user-preferences.mdc`: **User Registry** - ç”¨æˆ·åå¥½è¦†ç›–é€»è¾‘ã€‚
    *   `virtual-streamlit-team.mdc`: **Team Orchestrator** - æ¨¡å¼æ¿€æ´»å™¨ã€‚
    *   `template-maintenance-mode.mdc`: **Maintenance Switch** - æ¨¡æ¿ç»´æŠ¤æ¨¡å¼ä¸“ç”¨è§„åˆ™ã€‚
    *   `project-map-summary.mdc`: **Mini-Map** - é«˜å±‚æ‹“æ‰‘æ‘˜è¦ã€‚

### ğŸ“¦ Product Context (äº¤ä»˜ç«¯)

æ–°é¡¹ç›®å®ä¾‹åŒ–åçš„é¢„æœŸç»“æ„ï¼ˆåœ¨æ¨¡æ¿ä¸­ä»…ä½œä¸ºå ä½ç¬¦æˆ–ç¤ºä¾‹å­˜åœ¨ï¼‰ã€‚

*   `docs/`: é¡¹ç›®æ–‡æ¡£ (å®ä¾‹åŒ–åå­˜å‚¨å…·ä½“é¡¹ç›®çš„æ–‡æ¡£)ã€‚
*   `tasks/`: ä»»åŠ¡è¿½è¸ª (å®ä¾‹åŒ–åå­˜å‚¨å…·ä½“é¡¹ç›®çš„ä»»åŠ¡)ã€‚
*   `src/`: æºä»£ç  (å®ä¾‹åŒ–åç”Ÿæˆ)ã€‚
*   `README.md`: é¡¹ç›®å…¥å£ã€‚
*   `generate-project.ps1`: **å¯åŠ¨å™¨** - æ‰§è¡Œå®ä¾‹åŒ–è¿‡ç¨‹çš„è„šæœ¬ã€‚

## 2. å…³é”®æ•°æ®æµ (Data Flow)

```mermaid
graph TD
    subgraph "Factory Context (The Template)"
        MetaOps[Meta-Ops Agents] -->|ç»´æŠ¤ & éªŒè¯| Rules[.cursor/rules]
        MetaOps -->|è®¾è®¡ & ä¼˜åŒ–| Library[prompts-library]
        MetaOps -->|è®°å½•| MetaDocs[_meta/docs]
    end

    subgraph "Instantiation Engine"
        Launcher[generate-project.ps1]
        Library -->|Input: Templates| Launcher
        Rules -->|Input: Rules| Launcher
        MetaDocs -->|Reference: Structure| Launcher
    end

    subgraph "Product Context (The Instance)"
        Launcher -->|Output: Scaffold| NewProject[ç”¨æˆ·æ–°é¡¹ç›®]
        NewProject -->|Contains| InstanceDocs[docs/]
        NewProject -->|Contains| InstanceTasks[tasks/]
        NewProject -->|Contains| InstanceCode[src/]
        
        subgraph "Instance Runtime"
            InstanceRules[Instance .cursor/rules]
            InstanceDocs -.->|Guides| InstanceRules
            InstanceRules -->|Governs| InstanceCode
        end
    end

    User[æ¨¡æ¿ç»´æŠ¤è€…] -->|ä½¿ç”¨ _meta/prompts| MetaOps
    User2[æ–°é¡¹ç›®ç”¨æˆ·] -->|æ‰§è¡Œ| Launcher
```

## 3. ç»´æŠ¤è€…æŒ‡å— (Maintainer Guide)

1.  **æ–°å¢è§’è‰² (Capability)**:
    *   åœ¨ `prompts-library/templates/capabilities/` ä¸‹å¯¹åº”åˆ†ç»„åˆ›å»º `.md` æ–‡ä»¶ã€‚
    *   å¿…é¡»ç»§æ‰¿ `Prometheus` æ ‡å‡† (XML ç»“æ„)ã€‚
    *   è¿è¡Œ `_meta/prompts/ops/rule-checker.md` éªŒè¯åˆè§„æ€§ã€‚

2.  **æ–°å¢æ¨¡å¼ (Pattern)**:
    *   åœ¨ `prompts-library/templates/patterns/` å®šä¹‰ç¼–æ’é€»è¾‘ã€‚
    *   åœ¨ `.cursor/rules/` æ·»åŠ å¯¹åº”çš„ Orchestrator (`.mdc`)ã€‚

3.  **æ¶æ„å˜æ›´**:
    *   ä»»ä½•ç›®å½•ç»“æ„çš„å˜åŠ¨ï¼Œå¿…é¡»ç«‹å³é€šè¿‡ `map-updater.md` æ›´æ–°æœ¬æ–‡ä»¶åŠ `project-map-summary.mdc`ã€‚
    *   æ›´æ–° `_meta/docs/versioning-policy.md` ç‰ˆæœ¬å·ã€‚
