---
- **文件状态**: 指导原则
- **创建目的**: 提供编写高质量、结构化提示词的方法论，是所有“角色定义”文件的理论基础。
- **前置依赖**: 无
- **后续指引**: 指导了 `(成果)软件架构师提示词.md`, `(成果)高级软件工程师提示词.md`, `(成果)功能设计质量保证检验员提示词.md` 等所有角色提示词的创建。
---

# (成果) 指导调用大语言模型提示词编写方式 V2.0

**版本**: 2.0 (结构化增强版)
**更新日期**: 2025-11-26

---

## 一、 核心指令设计思路 (Core Prompt Design Philosophy)

为确保 AI 模型能精准、高效地理解并执行任务，我们设计的指令（Prompt）应遵循以下核心思路。其最终目标是：**提升响应准确性、降低Token消耗、支持程序化提取**。

1.  **角色化 (Role-Play)**: 明确赋予 AI 一个专家角色。例如，不要只说“写一段关于网络安全的代码”，而应指定“你是一位在Nginx DDoS防护方面拥有十年经验的资深网络安全架构师”。
2.  **目标导向 (Goal-Oriented)**: 清晰地阐述任务的最终目标和期望产出的具体形式。
3.  **结构化 (Structured)**: 使用 XML 标签或 Markdown 严格区分“核心指令”与“动态上下文”。
4.  **模板化 (Templatized)**: 将通用能力与业务数据分离，使提示词具备可复用性和可提取性。
5.  **引导而非命令 (Guidance over Orders)**: 使用引导性的语言，激发模型更深层次的“思考”和推理能力。

## 二、 指令编写步骤要求 (Step-by-Step Prompting Guide)

一份高质量的、可维护的提示词应包含以下结构化部分：

### 1. 元数据与定义 (Metadata & Definition)
*   **要求**: 定义角色名称、版本、核心能力（Base Capabilities）。
*   **示例**:
    ```markdown
    # 角色：[角色名称]
    ## 个人档案
    - 专长：...
    ```

### 2. 动态上下文插槽 (Dynamic Context Slots)
*   **核心变更**: 必须使用 XML 标签显式隔离业务上下文。这不仅为了 LLM 理解，更为了后续的自动化归档。
*   **示例**:
    ```xml
    <project_context>
    <!-- 在此处插入特定项目的业务背景、技术栈约束等 -->
    当前项目是：基于 Streamlit 的金融数据看板。
    </project_context>
    ```

### 3. 边界与规则 (Boundaries & Rules)
*   **运行时规则**: 全局生效的规则（如“总是中文回复”）应交给 `.cursor/rules` 管理，**不要**重复写在每个提示词里。
*   **角色特有规则**: 仅针对该角色的行为约束（如“代码必须符合 PEP8”）写在此处。

### 4. 工作流与输出 (Workflow & Output)
*   **工作流**: 清晰的 Step-by-Step 指南。
*   **输出**: 推荐要求结构化的输出（如 JSON 代码块或特定 XML 标签包裹），便于 Agent 链式调用。

## 三、 提示词模板化与元数据管理

为了实现“提示词资产积累”，在编写提示词时应遵循以下元数据管理原则：

1.  **基座分离**: 思考哪些描述是“放之四海而皆准”的（基座），哪些是“本项目特有”的（扩展）。
2.  **逆向提取友好**: 使用标准的 XML 标签（如 `<constraints>`, `<domain_knowledge>`），以便“图书管理员 Agent”能轻松提取出业务增量。
3.  **归档意识**: 即使是在手动编写 Prompt，也要想象它未来会被存入 `templates/` 目录，因此要保持结构的清晰性。

## 四、 模型最佳实践 (Model-Specific Best Practices)

虽然上述原则具有普适性，但针对不同模型的特性，我们可以进行微调以达到最佳效果。

### 1. Gemini 2.5 Pro
Gemini 2.5 Pro 被设计为一个具备深度思考和推理能力的模型，尤其擅长代码生成、应用创建和复杂问题分解。

*   **发挥其推理能力**: 采用“Reason + Act (ReAct)”的提示模式。在指令中鼓励它“先思考，再行动”。
*   **利用其长上下文窗口**: 当处理大型文档或数据集时，可以直接将大量信息喂给它，并要求它进行总结、分析或转换。
*   **调整 Temperature 参数**: 推理任务建议低值 (0.2)，创意任务建议高值 (1.0)。

### 2. Claude 3.5 Sonnet
Claude 系列模型以其强大的语言理解、写作和遵循复杂指令的能力而著称。

*   **强 XML 偏好**: Claude 对 XML 标签等结构化格式的遵循度非常高。务必使用 `<tag>...</tag>` 来包裹长文本、代码块或特定指令。
    *   **示例**:
        ```xml
        <report>
          <title>季度销售分析</title>
          <summary>...</summary>
        </report>
        ```
*   **精炼指令**: Claude 对自然语言的理解力很强，通常不需要像对早期模型那样进行过度复杂的指令“绕弯”。可以直接、清晰地表达你的需求。

---

## 五、 参考文献 (References)
*   Sebastian, C. (2025). *Best Practices For Prompt Engineering With Gemini 2.5 Pro*.
*   Internal Strategy: `_meta/docs/2025-11-26-prompt-evolution-strategy.md`
